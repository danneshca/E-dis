html {
    scroll-behavior: smooth;
}

*,
*::before,
*::after {
    box-sizing: border-box;
}

:root {
    --primary-color: #28C1B9; /* Teal from image */
    --primary-color-dark: #24aA9f;
    --accent-yellow: #FFD95A; /* Yellow accent from image */

    /* Light Theme (Default) */
    --light-bg-light: #F0F4F8; /* Softer background */
    --card-bg-light: #FFFFFF;
    --sidebar-bg-light: #F8FAFC; /* Very light, almost white */
    --text-color-light-theme: #3D5A70; /* Darker, softer text */
    --text-color-light-theme-light: #5A788A;
    --border-color-light: #D8E2EB;
    --input-bg-light: #F8FAFC;
    --placeholder-color-light: #9DB0BF;
    --switch-bg-light: #CED9E0;
    --vocab-button-bg-light: #F0F4F8;
    --box-shadow-soft-light: 0 8px 30px rgba(0, 0, 0, 0.07); /* Softer shadow */
    --box-shadow-interactive-light: 0 4px 12px rgba(40, 193, 185, 0.15); /* Slightly softer interactive */

    /* Dark Theme */
    --light-bg-dark: #121212; /* Very dark grey, almost black */
    --card-bg-dark: #1E1E1E; /* Dark grey for cards */
    --sidebar-bg-dark: #171717; /* Slightly different dark for sidebar */
    --text-color-dark-theme: #E0E0E0; /* Light grey for text */
    --text-color-dark-theme-light: #B0B0B0; /* Slightly darker light grey */
    --border-color-dark: #3A3A3A; /* Darker border */
    --input-bg-dark: #2C2C2C;
    --placeholder-color-dark: #707070;
    --switch-bg-dark: #4A4A4A;
    --vocab-button-bg-dark: #333333;
    --box-shadow-soft-dark: 0 8px 30px rgba(0, 0, 0, 0.25); /* Adjusted dark shadow */
    --box-shadow-interactive-dark: 0 4px 12px rgba(40, 193, 185, 0.25); /* Adjusted dark interactive */

    /* Colorful Theme - Solid Colors */
    --primary-colorful: #8E44AD;            /* Wisteria Purple - Main Accent */
    --primary-colorful-light: #9B59B6;      /* Lighter Solid Purple for gradients */
    --primary-colorful-dark: #7D3C98;       /* Darker Wisteria */
    --accent-colorful: #E67E22;             /* Carrot Orange - Secondary Accent */
    --text-color-colorful: #512E5F;         /* Dark Purple - Main Text */
    --text-color-colorful-light: #7D3C98;   /* Medium Purple - Lighter Text */
    --border-color-colorful-original: #D2B4DE; /* Pale Lilac - Original Borders */
    --input-bg-colorful: #FBEEE6;           /* Floral White - Input Background */
    --placeholder-color-colorful-original: #A569BD; /* Medium Purple - Original Placeholders */
    --switch-bg-colorful: #EBDEF0;           /* Light Lilac - Switch Off State */
    --vocab-button-bg-colorful: #E8DAEF;     /* Pale Purple - Vocab Buttons */
    --box-shadow-soft-colorful: 0 8px 30px rgba(81, 46, 95, 0.12); 
    --box-shadow-interactive-colorful: 0 4px 12px rgba(142, 68, 173, 0.2); 

    /* Colorful Theme - Gradients & NEW Solid Card BG */
    --light-bg-colorful-gradient: linear-gradient(135deg, #FEF9E7 0%, #FFF0E0 100%);
    --sidebar-bg-colorful-gradient: linear-gradient(180deg, #F6EEF9 0%, #E8DAEF 100%);
    /* --card-bg-colorful-gradient: linear-gradient(to bottom, #FFFFFF 0%, #FAF7FB 100%); /* OLD Light Gradient */
    --card-bg-colorful-solid: #FBF9FF; /* NEW: Very light purplish-white solid BG for cards/modals */
    --button-primary-colorful-gradient: linear-gradient(45deg, var(--primary-colorful-light) 0%, var(--primary-colorful) 100%);
    --button-primary-colorful-gradient-hover: linear-gradient(45deg, var(--primary-colorful) 0%, var(--primary-colorful-dark) 100%);

    /* ---- PinkBlue Theme Colors (NEW - based on image, slightly bluer, higher contrast text) ---- */
    --pb-pastel-pink: #FADADD; 
    --pb-pastel-blue: #D2E6F6; 
    --pb-lavender-blend: #EAE4F2; 

    --primary-pinkblue: #E5A9B4; 
    --primary-pinkblue-dark: #D88596; 
    
    --text-color-pinkblue: #3D3D3D; /* OLD: #4A4A4A (Dark Grey) NEW: Darker Grey for better contrast */
    --text-color-pinkblue-light: #6A6A6A; /* OLD: #777777 (Medium Grey) NEW: Darker Medium Grey */
    
    --border-color-pinkblue: #D1C4E9; 
    --input-bg-pinkblue: #FDF6F7; 
    --placeholder-color-pinkblue: #9B9B9B; /* OLD: #A0A0A0 NEW: Slightly darker placeholder */
    --switch-bg-pinkblue: #E1DDEF; 
    --vocab-button-bg-pinkblue: #EBF3FF; 

    --box-shadow-soft-pinkblue: 0 6px 20px rgba(120, 100, 150, 0.1);
    --box-shadow-interactive-pinkblue: 0 4px 10px rgba(229, 169, 180, 0.25);

    /* PinkBlue Theme - Gradients & Solid Backgrounds (NEW) */
    --light-bg-pinkblue-gradient: linear-gradient(135deg, var(--pb-pastel-pink) 0%, var(--pb-pastel-blue) 100%);
    --sidebar-bg-pinkblue-gradient: linear-gradient(180deg, #FEFBFB 0%, #F8FBFF 100%); /* OLD BLUE END: #FBFBFF; NEW: #F8FBFF (a touch more blue to the almost-white) */
    --card-bg-pinkblue-solid: #FCFAFF; /* Very Light Lavender White for cards/modals */
    --button-pb-blue-to-pink-main: linear-gradient(45deg, var(--pb-pastel-blue) 0%, var(--pb-pastel-pink) 100%);
    --button-pb-blue-to-pink-hover: linear-gradient(45deg, #C1DFF0 0%, #F8CDD7 100%); /* Slightly more saturated/deeper pastel blue to pastel pink */
    /* ---- End PinkBlue Theme Colors ---- */

    /* Fallback to light theme variables first */
    --app-light-bg: var(--light-bg-light);
    --app-card-bg: var(--card-bg-light);
    --app-sidebar-bg: var(--sidebar-bg-light);
    --app-text-color: var(--text-color-light-theme);
    --app-text-color-light: var(--text-color-light-theme-light);
    --app-border-color: var(--border-color-light);
    --app-input-bg: var(--input-bg-light);
    --app-placeholder-color: var(--placeholder-color-light);
    --app-switch-bg: var(--switch-bg-light);
    --app-vocab-button-bg: var(--vocab-button-bg-light);
    --app-box-shadow-soft: var(--box-shadow-soft-light);
    --app-box-shadow-interactive: var(--box-shadow-interactive-light);
    --app-primary-color: var(--primary-color); /* Add application level primary color */
    --app-primary-color-dark: var(--primary-color-dark); /* Add application level primary color dark */
    --app-primary-bg-action: var(--app-primary-color); /* New for action BGs */
    --app-primary-bg-action-hover: var(--app-primary-color-dark); /* New for action BG hovers */

    --border-radius-main: 22px; /* Slightly larger consistent border radius */
    --border-radius-interactive: 14px; /* Slightly larger for buttons, inputs */
}

html[data-theme='dark'] {
    --app-light-bg: var(--light-bg-dark);
    --app-card-bg: var(--card-bg-dark);
    --app-sidebar-bg: var(--sidebar-bg-dark);
    --app-text-color: var(--text-color-dark-theme);
    --app-text-color-light: var(--text-color-dark-theme-light);
    --app-border-color: var(--border-color-dark);
    --app-input-bg: var(--input-bg-dark);
    --app-placeholder-color: var(--placeholder-color-dark);
    --app-switch-bg: var(--switch-bg-dark);
    --app-vocab-button-bg: var(--vocab-button-bg-dark);
    --app-box-shadow-soft: var(--box-shadow-soft-dark);
    --app-box-shadow-interactive: var(--box-shadow-interactive-dark);
}

html[data-theme='colorful'] {
    --app-light-bg: var(--light-bg-colorful-gradient);
    --app-card-bg: var(--card-bg-colorful-solid); /* USE NEW SOLID CARD/MODAL BG */
    --app-sidebar-bg: var(--sidebar-bg-colorful-gradient);
    --app-text-color: var(--text-color-colorful); /* #512E5F - should be good on new card bg */
    --app-text-color-light: var(--text-color-colorful-light);  /* #7D3C98 */
    --app-border-color: #B084CC; /* Darkened border color from previous attempt, KEEP THIS */
    --app-input-bg: var(--input-bg-colorful); /* #FBEEE6 - Floral white for inputs */
    --app-placeholder-color: var(--text-color-colorful-light); /* #7D3C98 - Using a darker purple for placeholder */
    --app-switch-bg: var(--switch-bg-colorful);
    --app-vocab-button-bg: var(--vocab-button-bg-colorful);
    --app-box-shadow-soft: var(--box-shadow-soft-colorful);
    --app-box-shadow-interactive: var(--box-shadow-interactive-colorful);
    --app-primary-color: var(--primary-colorful);
    --app-primary-color-dark: var(--primary-colorful-dark);
    --app-primary-bg-action: var(--button-primary-colorful-gradient);
    --app-primary-bg-action-hover: var(--button-primary-colorful-gradient-hover);

    /* Remove specific modal header/footer BG vars, as --app-card-bg now covers the whole modal solid */
}

html[data-theme='pinkblue'] {
    --app-light-bg: var(--light-bg-pinkblue-gradient);
    --app-card-bg: var(--card-bg-pinkblue-solid);
    --app-sidebar-bg: var(--sidebar-bg-pinkblue-gradient);
    --app-text-color: var(--text-color-pinkblue);
    --app-text-color-light: var(--text-color-pinkblue-light);
    --app-border-color: var(--border-color-pinkblue);
    --app-input-bg: var(--input-bg-pinkblue);
    --app-placeholder-color: var(--placeholder-color-pinkblue);
    --app-switch-bg: var(--switch-bg-pinkblue);
    --app-vocab-button-bg: var(--vocab-button-bg-pinkblue); /* Note: This is for solid bg, gradient buttons will use --app-primary-bg-action */
    --app-box-shadow-soft: var(--box-shadow-soft-pinkblue);
    --app-box-shadow-interactive: var(--box-shadow-interactive-pinkblue);
    
    --app-primary-color: var(--primary-pinkblue); /* Fallback/text color for primary elements */
    --app-primary-color-dark: var(--primary-pinkblue-dark);
    
    /* USE THE NEW BLUE-TO-PINK GRADIENTS FOR BUTTONS */
    --app-primary-bg-action: var(--button-pb-blue-to-pink-main);
    --app-primary-bg-action-hover: var(--button-pb-blue-to-pink-hover);
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    margin: 0;
    background: var(--app-light-bg);
    color: var(--app-text-color);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    transition: background 0.3s ease, color 0.3s ease;
    line-height: 1.6; /* Enhanced readability */
}

.container {
    display: flex;
    width: 90%;
    max-width: 1250px; /* Slightly wider max-width */
    height: 90vh; /* Increased height */
    max-height: 800px; /* Increased max-height */
    background: var(--app-card-bg);
    border-radius: var(--border-radius-main);
    box-shadow: var(--app-box-shadow-soft); /* Using themed soft shadow */
    overflow: hidden;
    transition: background 0.3s ease, box-shadow 0.3s ease;
}

/* Sidebar */
.sidebar {
    width: 240px; /* Wider sidebar */
    background: var(--app-sidebar-bg);
    padding: 30px 20px; /* Adjusted padding */
    border-right: 1px solid var(--app-border-color);
    transition: background 0.3s ease, border-color 0.3s ease;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.sidebar nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.sidebar nav ul li a {
    display: block;
    padding: 15px 20px; /* Increased padding for links */
    text-decoration: none;
    color: var(--app-text-color-light);
    font-weight: 500;
    border-radius: var(--border-radius-interactive);
    margin-bottom: 10px; /* Consistent margin */
    transition: background 0.2s ease-in-out, color 0.2s ease-in-out, transform 0.1s ease;
}

.sidebar nav ul li a:hover {
    background: var(--app-primary-bg-action-hover);
    color: #ffffff;
    transform: translateY(-1px); /* Subtle lift effect */
}
.sidebar nav ul li.active a {
    background: var(--app-primary-bg-action);
    color: #ffffff;
    box-shadow: var(--app-box-shadow-interactive); 
}

.sidebar nav ul li a:focus-visible { /* Using focus-visible for better accessibility */
    outline: none; 
    box-shadow: 0 0 0 2px var(--app-sidebar-bg), 0 0 0 4px var(--app-primary-color); 
}
.sidebar nav ul li.active a:focus-visible { 
     box-shadow: 0 0 0 2px var(--app-primary-bg-action), 0 0 0 4px var(--app-primary-color-dark);
}

/* Theme Toggle Button */
.theme-toggle-button {
    padding: 12px 20px; 
    background-color: var(--app-vocab-button-bg);
    color: var(--app-text-color);
    border: 1px solid var(--app-border-color);
    border-radius: var(--border-radius-interactive);
    cursor: pointer;
    font-size: 0.9rem; 
    font-weight: 500;
    text-align: center;
    transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
    width: 100%;
    box-sizing: border-box;
}

.theme-toggle-button:hover {
    background: var(--app-primary-bg-action);
    color: #ffffff;
    border-color: transparent;
    transform: translateY(-1px); /* Subtle lift */
}

/* Main Content */
.main-content {
    flex-grow: 1;
    padding: 35px 40px; /* Adjusted padding */
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    background: var(--app-card-bg);
    transition: background 0.3s ease;
}

.input-section {
    display: flex;
    flex-direction: column;
}

.dialog-box textarea {
    width: 100%;
    height: 180px; 
    padding: 18px 20px; /* Adjusted padding */
    border: 1px solid var(--app-border-color);
    border-radius: var(--border-radius-interactive);
    font-size: 1rem;
    line-height: 1.5; /* Improved textarea readability */
    box-sizing: border-box;
    resize: vertical;
    background-color: var(--app-input-bg);
    color: var(--app-text-color);
    transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s ease, color 0.3s ease;
}

.dialog-box textarea::placeholder {
    color: var(--app-placeholder-color);
}

.dialog-box textarea:focus {
    outline: none;
    border-color: var(--app-primary-color);
    box-shadow: 0 0 0 3px rgba(var(--app-primary-color), 0.3); /* Softer, theme-aware focus ring */
    background: var(--app-card-bg);
}
html[data-theme='dark'] .dialog-box textarea:focus {
    box-shadow: 0 0 0 3px rgba(40, 193, 185, 0.4); /* Dark theme focus ring color if primary isn't RGB */
}
html[data-theme='colorful'] .dialog-box textarea:focus {
     box-shadow: 0 0 0 3px rgba(142, 68, 173, 0.4); /* Colorful theme focus ring */
}


.controls {
    display: flex;
    flex-direction: column;
    gap: 18px; /* Slightly adjusted gap */
    align-items: flex-start;
    padding-top: 25px; 
    margin-top: 25px; 
    border-top: 1px solid var(--app-border-color);
}

.language-select select {
    padding: 12px 18px;
    border-radius: var(--border-radius-interactive);
    border: 1px solid var(--app-border-color);
    font-size: 0.95rem;
    background-color: var(--app-card-bg);
    color: var(--app-text-color);
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%233D5A70' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 1em;
    padding-right: 40px;
    transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s ease, color 0.3s ease;
}
.language-select select:focus {
    outline: none;
    border-color: var(--app-primary-color);
    box-shadow: 0 0 0 3px rgba(var(--app-primary-color), 0.3); /* Softer focus ring */
}
html[data-theme='dark'] .language-select select:focus {
    box-shadow: 0 0 0 3px rgba(40, 193, 185, 0.4);
}
html[data-theme='colorful'] .language-select select:focus {
    box-shadow: 0 0 0 3px rgba(142, 68, 173, 0.4);
}


html[data-theme='dark'] .language-select select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23E0E0E0' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E");
}

html[data-theme='colorful'] .language-select select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%237D3C98' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E");
}

.save-to-vocab {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 0.95rem;
    color: var(--app-text-color-light);
}

/* Toggle Switch styling - refined */
.switch {
    position: relative;
    display: inline-block;
    width: 52px; 
    height: 30px;
}

.switch input { 
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--app-switch-bg);
    transition: .3s;
}

.slider:before {
    position: absolute;
    content: "";
    height: 22px;
    width: 22px; 
    left: 4px;
    bottom: 4px;
    background-color: var(--card-bg-light);
    transition: .3s;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

html[data-theme='dark'] .slider:before {
    background-color: var(--text-color-dark-theme-light);
}

input:checked + .slider {
    background: var(--app-primary-bg-action);
}

input:focus + .slider {
    box-shadow: 0 0 0 2px var(--app-primary-color); /* Simplified focus for slider */
}

input:checked + .slider:before {
    transform: translateX(22px);
}

.slider.round {
    border-radius: 30px;
}

.slider.round:before {
    border-radius: 50%;
}

.submit-button {
    padding: 14px 35px; 
    background: var(--app-primary-bg-action);
    color: white;
    border: none;
    border-radius: 28px; /* Slightly more rounded pill shape */
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s ease-in-out, box-shadow 0.2s ease-in-out, transform 0.1s ease;
    box-shadow: var(--app-box-shadow-interactive);
    align-self: flex-start; /* Align to start if controls are column */
}

.submit-button:hover {
    background: var(--app-primary-bg-action-hover);
    box-shadow: 0 7px 18px var(--app-box-shadow-interactive); /* Enhanced hover shadow */
    transform: translateY(-2px); /* More lift on hover */
}

.submit-button:active {
    transform: translateY(0px); /* Reset lift, slight press */
    box-shadow: 0 3px 10px var(--app-box-shadow-interactive); /* Softer active shadow */
}

/* Output Sidebar */
.output-sidebar {
    width: 450px; /* Wider output for more content, increased from 400px */
    background: var(--app-sidebar-bg);
    padding: 30px 35px; /* Adjusted padding */
    border-left: 1px solid var(--app-border-color);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    transition: background 0.3s ease, border-color 0.3s ease;
}

.markdown-output {
    background: var(--app-card-bg);
    border: 1px solid var(--app-border-color);
    border-radius: var(--border-radius-interactive);
    padding: 25px; /* Increased padding */
    height: 100%; 
    box-sizing: border-box;
    overflow-y: auto;
    transition: background 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    line-height: 1.7; /* Improved readability for markdown output */
}
.markdown-output:empty::before { /* Placeholder for empty state */
    content: "结果将显示在此处...";
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    font-style: italic;
    color: var(--app-placeholder-color);
    font-size: 1rem;
}


.markdown-output pre {
    margin: 1em 0; /* Better spacing for pre blocks */
    padding: 1em;
    background-color: var(--app-input-bg); /* Use input-bg for pre blocks */
    border-radius: var(--border-radius-interactive);
    overflow-x: auto; /* Allow horizontal scroll for long code lines */
    white-space: pre-wrap;
    word-wrap: break-word;
    /* height: 100%; REMOVED - let content define height */
    /* overflow-y: auto; REMOVED */
    font-size: 0.9rem;
    color: var(--app-text-color);
    transition: color 0.3s ease, background-color 0.3s ease;
}

.markdown-output code { 
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
    background-color: var(--app-input-bg); /* Consistent with pre */
    padding: 0.2em 0.4em; /* Standard padding for inline code */
    border-radius: 6px; /* Slightly more rounded */
    color: var(--app-primary-color); /* Use primary color for inline code text */
    font-size: 0.875em; /* Slightly smaller than surrounding text */
}

html[data-theme='dark'] .markdown-output code {
    background-color: #2c2c2c; 
    color: var(--app-primary-color); 
}

html[data-theme='colorful'] .markdown-output code {
    background-color: var(--input-bg-colorful); 
    color: var(--primary-colorful-dark); 
}

.markdown-output pre code { /* Reset for code inside pre */
    background-color: transparent;
    padding: 0;
    border-radius: 0;
    color: inherit;
    font-size: inherit; /* Inherit font size from pre */
}

/* Responsive adjustments */
@media (max-width: 1024px) { 
    .container {
        flex-direction: column;
        height: auto;
        max-height: none;
        width: 95%;
        background: var(--app-light-bg);
        margin-top: 20px; /* Add some margin on mobile */
        margin-bottom: 20px;
    }
    .sidebar, .output-sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--app-border-color);
        padding: 20px;
    }
    .output-sidebar {
        border-left: none;
        border-top: 1px solid var(--app-border-color);
        min-height: 300px; /* Ensure it has some height */
        border-bottom: none;
    }
    .main-content {
        padding: 25px;
    }
    .vocab-list-section h2 {
        margin-top: 0;
    }
}

@media (max-width: 768px) {
    .sidebar {
        padding: 15px;
    }
    .sidebar nav ul li a {
        padding: 12px 15px;
    }
    .main-content {
        padding: 20px;
    }
    .dialog-box textarea {
        height: 150px;
        padding: 15px;
    }
    .controls {
        gap: 15px;
    }
    .language-select select {
        padding: 10px 15px;
        padding-right: 35px;
    }
    .submit-button {
        padding: 12px 30px;
        width: 100%;
    }
    .output-sidebar {
        padding: 20px;
        min-height: 250px;
    }
    .markdown-output {
        padding: 15px;
    }
    .vocab-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
    .vocab-item-buttons {
        margin-left: 0;
    }
}

/* Vocabulary List Styles */
.vocab-list-section h2 {
    color: var(--app-text-color);
    margin-bottom: 20px; /* Slightly reduced margin */
    font-size: 1.7rem; /* Adjusted size */
    font-weight: 600;
    border-bottom: 2px solid var(--app-primary-color);
    padding-bottom: 12px; /* Adjusted padding */
    display: inline-block; 
}

#vocab-items-container {
    display: flex;
    flex-direction: column;
    gap: 1px;
    background-color: var(--app-border-color);
    border: 1px solid var(--app-border-color);
    border-radius: var(--border-radius-interactive);
    overflow: hidden;
}

.vocab-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 18px; /* Adjusted padding */
    background-color: var(--app-card-bg);
    transition: background-color 0.2s ease;
}

.vocab-item:hover {
    background-color: var(--app-input-bg);
}

.vocab-item-word {
    font-size: 1.05rem; /* Adjusted size */
    color: var(--app-text-color);
    font-weight: 500;
    flex-grow: 1;
}

.vocab-item-buttons {
    display: flex;
    align-items: center;
    gap: 12px; /* Increased gap */
    margin-left: 15px;
}

.vocab-button {
    background-color: var(--app-vocab-button-bg); 
    color: var(--app-text-color-light);
    border: none;
    border-radius: 50%;
    width: 40px; /* Slightly larger */
    height: 40px; /* Slightly larger */
    font-size: 1.2rem; /* Adjusted for new size */
    font-weight: bold;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease;
    line-height: 1;
}

.vocab-button:hover {
    background: var(--app-primary-bg-action-hover);
    color: white;
    box-shadow: 0 3px 10px rgba(0,0,0,0.12); /* Softer shadow */
    transform: scale(1.05); /* Slight scale effect */
}

.delete-button {
    font-size: 1.4rem; 
}
.delete-button:hover {
    background: #E53935;
    color: white;
    transform: scale(1.05) rotate(5deg); /* Fun rotate effect */
}

/* Message Styles (Loading, Empty, Error) */
.loading-message,
.empty-message,
.error-message,
.debug-link-message {
    padding: 25px; /* Increased padding */
    text-align: center;
    font-size: 1rem;
    color: var(--app-text-color-light);
}

.error-message {
    color: #D32F2F; 
    font-weight: 500; /* Make error more prominent */
}

.debug-link-message a {
    color: var(--app-primary-color);
    text-decoration: none;
    font-weight: 500;
}

.debug-link-message a:hover {
    text-decoration: underline;
}

/* Version Display Styles */
.version-display {
    font-size: 0.8rem; /* Slightly smaller */
    color: var(--app-text-color-light);
    text-align: center;
    padding: 8px 0; /* More padding */
    margin-bottom: 8px; 
    opacity: 0.75; 
}

/* App Title Styles */
.app-title {
    font-size: 1.6rem; /* Increased size */
    font-weight: 700; /* Bolder */
    color: var(--app-primary-color);
    text-align: center; 
    padding: 15px 0; 
    margin-bottom: 20px; /* Adjusted margin */
    line-height: 1.3; /* Improved line height for multi-line title */
}

/* Quiz Interface Styles */
.quiz-interface-container {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    height: 100%;
    box-sizing: border-box;
}

.quiz-instruction {
    font-size: 1rem;
    color: var(--app-text-color);
    margin-bottom: 5px;
}

.quiz-sentence-textarea {
    width: 100%;
    min-height: 120px;
    padding: 12px 15px;
    border: 1px solid var(--app-border-color);
    border-radius: var(--border-radius-interactive);
    font-size: 0.95rem;
    line-height: 1.5; /* Readability for textarea */
    box-sizing: border-box;
    resize: vertical;
    background-color: var(--app-input-bg);
    color: var(--app-text-color);
    transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s ease, color 0.3s ease;
    flex-grow: 1;
}
.quiz-sentence-textarea:focus {
    outline: none;
    border-color: var(--app-primary-color);
    box-shadow: 0 0 0 3px rgba(var(--app-primary-color), 0.3); /* Softer focus ring */
}
html[data-theme='dark'] .quiz-sentence-textarea:focus {
    box-shadow: 0 0 0 3px rgba(40, 193, 185, 0.4);
}
html[data-theme='colorful'] .quiz-sentence-textarea:focus {
    box-shadow: 0 0 0 3px rgba(142, 68, 173, 0.4);
}

.quiz-sentence-textarea::placeholder {
    color: var(--app-placeholder-color);
}

.quiz-submit-button {
    margin-top: auto;
    width: 100%;
}

/* Quiz Result Controls Styles */
.quiz-result-controls {
    display: flex;
    justify-content: center;
    gap: 15px;
    padding-top: 15px;
    margin-top: 20px;
    border-top: 1px solid var(--app-border-color);
}

.quiz-result-controls .vocab-button.keep-vocab-button,
.quiz-result-controls .vocab-button.remove-after-quiz-button {
    width: auto;
    height: auto;
    border-radius: var(--border-radius-interactive);
    font-size: 0.9rem;
    font-weight: 500;
    line-height: normal;
    padding: 10px 20px;
    display: inline-block;

    background-color: var(--app-vocab-button-bg);
    color: var(--app-text-color);
    border: 1px solid var(--app-border-color);
    transform: none; /* Reset transform from .vocab-button */
}
.quiz-result-controls .vocab-button.keep-vocab-button:hover {
    background-color: var(--app-input-bg); 
    border-color: var(--app-text-color-light);
    color: var(--app-text-color);
    transform: translateY(-1px); /* Add subtle lift */
}

.quiz-result-controls .vocab-button.remove-after-quiz-button.delete-button {
    font-size: 0.9rem;
}
.quiz-result-controls .vocab-button.remove-after-quiz-button.delete-button:hover {
    transform: translateY(-1px) rotate(0deg); /* Reset vocab button rotate but keep lift */
}

.quiz-instruction {
    font-size: 1rem;
    color: var(--app-text-color);
    margin-bottom: 5px;
}

/* ADDED: SVG arrow for colorful theme */
html[data-theme='colorful'] .language-select select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%237D3C98' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E");
}

.github-link {
    font-size: 0.8rem; /* Slightly smaller */
    color: var(--app-text-color-light);
    text-align: center;
    padding: 8px 0; /* More padding */
    margin-bottom: 12px; 
    opacity: 0.75; 
}

.github-link a {
    color: inherit;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    transition: opacity 0.2s ease;
}

.github-link a svg {
    vertical-align: middle;
    margin-right: 6px; /* Slightly more space */
}

.github-link a:hover {
    text-decoration: underline;
    opacity: 1;
}

/* Scrollbar Styles (Optional - for a more custom look) */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--app-sidebar-bg); /* Or a very light grey */
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: var(--app-border-color);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--app-text-color-light);
}

/* Apply scrollbar styles to specific scrollable areas if needed */
.main-content, .output-sidebar, .markdown-output, .markdown-output pre {
    scrollbar-width: thin; /* Firefox */
    scrollbar-color: var(--app-border-color) var(--app-sidebar-bg); /* Firefox */
}

/* 用户相关样式 */
.user-section {
    margin-bottom: 15px;
    text-align: center;
}

#username-display {
    display: block;
    margin-bottom: 10px;
    font-weight: 500;
    color: var(--app-text-color);
}

/* 模态框样式 */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
}

.modal-content {
    position: relative;
    background-color: var(--app-card-bg);
    margin: 15% auto;
    padding: 0;
    width: 90%;
    max-width: 500px;
    border-radius: var(--border-radius-main);
    box-shadow: var(--app-box-shadow-soft);
    animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
    from {
        transform: translateY(-100px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-header {
    padding: 20px;
    border-bottom: 1px solid var(--app-border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h2 {
    margin: 0;
    color: var(--app-text-color);
    font-size: 1.5rem;
}

.close-button {
    color: var(--app-text-color-light);
    font-size: 1.5rem;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s ease;
}

.close-button:hover {
    color: var(--app-text-color);
}

.modal-body {
    padding: 20px;
}

/* 认证表单样式 */
.auth-tabs {
    display: flex;
    margin-bottom: 20px;
    border-bottom: 1px solid var(--app-border-color);
}

.auth-tab {
    padding: 10px 20px;
    background: none;
    border: none;
    color: var(--app-text-color-light);
    cursor: pointer;
    font-size: 1rem;
    transition: all 0.2s ease;
}

.auth-tab.active {
    color: var(--app-primary-color);
    border-bottom: 2px solid var(--app-primary-color);
}

.auth-tab:hover:not(.active) {
    color: var(--app-text-color);
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    color: var(--app-text-color);
    font-weight: 500;
}

.form-group input {
    width: 100%;
    padding: 12px;
    border: 1px solid var(--app-border-color);
    border-radius: var(--border-radius-interactive);
    background-color: var(--app-input-bg);
    color: var(--app-text-color);
    font-size: 1rem;
    transition: border-color 0.3s, box-shadow 0.3s;
}

.form-group input:focus {
    outline: none;
    border-color: var(--app-primary-color);
    box-shadow: 0 0 0 3px rgba(var(--app-primary-color), 0.3);
}

#auth-form .submit-button {
    width: 100%;
    margin-top: 10px;
}

/* 响应式调整 */
@media (max-width: 768px) {
    .modal-content {
        margin: 10% auto;
        width: 95%;
    }
    
    .modal-header {
        padding: 15px;
    }
    
    .modal-body {
        padding: 15px;
    }
    
    .auth-tab {
        padding: 8px 15px;
    }
}

/* Notification Modal Specific Styles */
.notification-modal-content {
    max-width: 400px; /* Smaller width for notifications */
}

.notification-modal-header h2 {
    font-size: 1.3rem; /* Slightly smaller title */
}

.notification-modal-body {
    padding-top: 15px;
    padding-bottom: 20px;
    font-size: 1rem;
    line-height: 1.5;
    color: var(--app-text-color);
    word-wrap: break-word; /* Ensure long messages wrap */
}

.notification-modal-footer {
    padding: 15px 20px;
    border-top: 1px solid var(--app-border-color);
    display: flex;
    justify-content: flex-end; /* Align button to the right */
}

#notification-ok-button {
    min-width: 80px;
    padding: 10px 20px; /* Adjust padding */
}

/* Ensure new modal uses existing modal display logic */
#notification-modal {
    /* display: none; already inline, but good for clarity */
    /* position: fixed; ... inherits from .modal */
    /* ... other styles like background are inherited from .modal */
}

/* Ensure close button is styled like the auth modal's close button */
#notification-modal .close-button {
    /* Styles inherited from .close-button */
}

/* Focus style for OK button */
#notification-ok-button:focus {
    outline: none;
    box-shadow: 0 0 0 3px var(--app-card-bg), 0 0 0 4px var(--app-primary-color);
}

/* Adjust colorful mode auth tabs for better visibility */
html[data-theme='colorful'] .auth-tab {
    color: #6A287E; /* Darker purple for non-active tabs, KEEP THIS */
}
/* Active tab color is already set by .auth-tab.active */

/* Remove specific modal header/footer overrides from previous turn as --app-card-bg handles it */
/* html[data-theme='colorful'] .modal-header { ... } */
/* html[data-theme='colorful'] .modal-footer { ... } */

/* Ensure text colors within colorful modals are correctly applied using main text color */
html[data-theme='colorful'] .form-group label,
html[data-theme='colorful'] .modal-header h2,
html[data-theme='colorful'] .notification-modal-body p {
    color: var(--app-text-color); /* This is #512E5F, should be good */
}

/* Ensure close button in colorful modals is clear */
html[data-theme='colorful'] .modal-header .close-button {
    color: var(--app-text-color); /* #512E5F */
}
html[data-theme='colorful'] .modal-header .close-button:hover {
    color: var(--primary-colorful-dark); /* #7D3C98 */
}

/* Textarea focus for colorful theme - ensure border is visible */
html[data-theme='colorful'] .dialog-box textarea:focus,
html[data-theme='colorful'] .quiz-sentence-textarea:focus,
html[data-theme='colorful'] .language-select select:focus,
html[data-theme='colorful'] .form-group input:focus {
     box-shadow: 0 0 0 3px var(--app-card-bg), 0 0 0 4px var(--app-primary-color); /* Ensure primary color in shadow is visible */
     /* Consider adding: border-color: var(--app-primary-color); if not already effective */
}

/* Specific adjustments for pinkblue theme if needed, e.g., focus rings */
html[data-theme='pinkblue'] .dialog-box textarea:focus,
html[data-theme='pinkblue'] .quiz-sentence-textarea:focus,
html[data-theme='pinkblue'] .language-select select:focus,
html[data-theme='pinkblue'] .form-group input:focus {
     box-shadow: 0 0 0 3px var(--app-card-bg), 0 0 0 4px var(--app-primary-color); 
}

/* Ensure select dropdown arrow matches the theme */
html[data-theme='pinkblue'] .language-select select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%233D3D3D' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E"); /* Using NEW darker text-color-pinkblue */
}

/* Ensure inline code color is distinct in pinkblue theme */
html[data-theme='pinkblue'] .markdown-output code {
    background-color: var(--app-input-bg); /* Very Light Pink */
    color: var(--primary-pinkblue); /* Soft Pink for code text */
}
html[data-theme='pinkblue'] .markdown-output pre code {
    background-color: transparent;
    color: inherit;
}

/* Ensure auth tabs have good contrast */
html[data-theme='pinkblue'] .auth-tab {
    color: var(--text-color-pinkblue-light);
}
html[data-theme='pinkblue'] .auth-tab.active {
    color: var(--primary-pinkblue);
    border-bottom: 2px solid var(--primary-pinkblue);
}

/* Add text shadow for better contrast on gradient buttons in pinkblue theme */
html[data-theme='pinkblue'] .sidebar nav ul li.active a,
html[data-theme='pinkblue'] .sidebar nav ul li a:hover {
    text-shadow: 1px 1px 2px rgba(61, 61, 61, 0.3); /* Using #3D3D3D with alpha */
}

html[data-theme='pinkblue'] .submit-button {
    text-shadow: 1px 1px 2px rgba(61, 61, 61, 0.3);
}

/* Make buttons gradient in pinkblue theme */
html[data-theme='pinkblue'] .theme-toggle-button,
html[data-theme='pinkblue'] .vocab-button,
html[data-theme='pinkblue'] .quiz-result-controls .vocab-button.keep-vocab-button,
html[data-theme='pinkblue'] .quiz-result-controls .vocab-button.remove-after-quiz-button {
    background: var(--app-primary-bg-action);
    color: white; 
    border: none; 
    text-shadow: 1px 1px 2px rgba(61, 61, 61, 0.3); /* Added text shadow */
}

/* Hover states for these gradient buttons */
html[data-theme='pinkblue'] .theme-toggle-button:hover,
html[data-theme='pinkblue'] .vocab-button:not(.delete-button):hover, 
html[data-theme='pinkblue'] .quiz-result-controls .vocab-button.keep-vocab-button:hover,
html[data-theme='pinkblue'] .quiz-result-controls .vocab-button.remove-after-quiz-button:not(.delete-button):hover {
    background: var(--app-primary-bg-action-hover);
    color: white;
    text-shadow: 1px 1px 2px rgba(61, 61, 61, 0.3); /* Added text shadow */
}

/* Ensure delete button hover remains red and specific - no text shadow needed here as bg is dark */
html[data-theme='pinkblue'] .vocab-button.delete-button:hover {
    background: #E53935 !important; 
    color: white !important;
    text-shadow: none; /* Explicitly remove text shadow if inherited */
}

/* Adjust padding for quiz result buttons if border removal affects size */
/* These buttons already have specific padding, this ensures it's applied in this context too if needed */
html[data-theme='pinkblue'] .quiz-result-controls .vocab-button.keep-vocab-button,
html[data-theme='pinkblue'] .quiz-result-controls .vocab-button.remove-after-quiz-button {
    padding: 10px 20px; /* Ensure padding is maintained */
}

/* Reset transform for quiz result buttons on hover if general .vocab-button:hover transform is not desired */
html[data-theme='pinkblue'] .quiz-result-controls .vocab-button.keep-vocab-button:hover,
html[data-theme='pinkblue'] .quiz-result-controls .vocab-button.remove-after-quiz-button:not(.delete-button):hover {
    transform: translateY(-1px); /* Consistent with other button hovers like .theme-toggle-button:hover if needed*/
} 